# Система мониторинга температуры

## О проекте
Модернизированная версия логгера температуры с:
- HTTP-сервером на C++ (Boost.Beast)
- Веб-интерфейсом на Python/Flask
- Хранением данных в SQLite (вместо файлов из предыдущей версии)

## Зависимости

### Серверная часть (C++)
```bash
# Ubuntu/Debian
sudo apt install g++ libboost-all-dev sqlite3 libsqlite3-dev

# Fedora
sudo dnf install gcc-c++ boost-devel sqlite sqlite-devel
```

### Веб-интерфейс (Python)
```bash
pip install flask
```

## Запуск проекта
1. Скомпилировать сервер:
```bash
g++ -std=c++17 http_server.cpp -lboost_system -lsqlite3 -o server -pthread
```

2. Запустить сервер (в отдельном терминале):
```bash
./server
```

3. Запустить веб-интерфейс:
```bash
python3 web_app.py
```

## Доступ к интерфейсам
- Веб-интерфейс: http://localhost:5000
- API-эндпоинты:
    - `GET /current` - текущая температура
    - `GET /hourly` - средняя за час
    - `GET /daily` - средняя за день

## Структура БД
```sql
raw_temps    -- Сырые данные (хранятся 1 день)
hourly_avg   -- Часовые средние (хранятся 1 месяц)
daily_avg    -- Дневные средние (хранятся 1 год)
```

## Генерация данных
Реалистичная симуляция с:
- Суточными колебаниями (±5°C)
- Случайными отклонениями (±2°C)
- Физическими ограничениями (10-35°C)

```cpp
float temp = 22.0f + sin(/*...*/)*5.0f + (rand()%200-100)/50.0f;
temp = std::clamp(temp, 10.0f, 35.0f);
```

## Структура проекта
```
├── templates/
│   └── dashboard.html # HTML шаблон
├── http_server.cpp # Исходный код сервера
├── web_app.py      # Веб-интерфейс
└── temps.db        # База данных (создаётся автоматически)
```

>Для первого запуска убедитесь, что порты 8080 (API) и 5000 (веб-интерфейс) свободны.
