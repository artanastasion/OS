# Лабораторная работа № 3

## Компиляция

```bash
# Linux/macOS
g++ -std=c++11 -pthread main.cpp -o counter

# Windows (Visual Studio)
cl /EHsc main.cpp
```

## Запуск

```bash
# Основной экземпляр
./counter

# Дополнительные экземпляры (в других терминалах)
./counter
```

## Функциональность

### Основные функции:

1. **Управление счетчиком**:
    - Автоматическое увеличение (+1 каждые 300 мс)
    - Ручное изменение через консоль

2. **Логирование**:
    - Запись в файл `counter.log`
    - Формат: `[Время] - PID: [ID], Counter: [значение]`

3. **Мультипроцессинг**:
    - Главный процесс:
        * Создает дочерние процессы
        * Ведет лог
    - Вторичные процессы:
        * Только изменяют счетчик

4. **Дочерние процессы**:
    - Тип 1: +10 к счетчику
    - Тип 2: ×2, пауза 2с, ÷2

## Файлы системы

- `counter`/`counter.exe` - исполняемый файл
- `counter.log` - лог работы (создается автоматически)
- `counter.lock` - временный файл блокировки (удаляется автоматически)

1. Проверка основного функционала:
   ```bash
   ./counter
   > Вводите значения, проверяйте counter.log
   ```

2. Проверка многопоточности:
   ```bash
   # В первом терминале:
   ./counter
   
   # Во втором терминале:
   ./counter
   ```

## Логирование

Формат записей в `counter.log`:

```
[YYYY-MM-DD HH:MM:SS.mmm] - Сообщение
Пример:
2023-05-20 15:30:45.123 - Process 12345 started (type 1)
2023-05-20 15:30:45.456 - PID: 12345, Counter: 42
```

Для завершения программы введите `q` в консоли:

```
Current counter: 5
Enter new value or 'q' to quit: q
```